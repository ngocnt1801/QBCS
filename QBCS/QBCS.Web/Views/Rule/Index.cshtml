@model List<List<QBCS.Service.ViewModel.RuleViewModel>>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<head>
    <link rel="stylesheet" href="~/Scripts/bootstrap-tagsinput.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/bootstrap.tagsinput/0.4.2/bootstrap-tagsinput.min.js"></script>
</head>

<div class="row">
    <div class="col">
        <h2>Rules</h2>
    </div>
    <div class="col mb-2">
        <a href="@Url.Action("Edit", "Rule")" class="btn btn-primary float-right">Edit Rule</a>
    </div>
</div>
@foreach (List<QBCS.Service.ViewModel.RuleViewModel> rvm in Model)
{
    <div class="card shadow mb-4">
        <a href="#collapse_@rvm.FirstOrDefault().GroupTypeEnum" class="d-block card-header py-3" data-toggle="collapse" role="button" aria-expanded="true" aria-controls="collapseCardExample">
            <h6 class="m-0 font-weight-bold text-primary">@rvm.FirstOrDefault().GroupTypeEnum.ToString().Replace("_"," ") Rule</h6>
        </a>
        <div class="card-body collapse show" id="collapse_@rvm.FirstOrDefault().GroupTypeEnum" style="padding-left:30px">
            <div class="table-responsive">
                <table class="table table-bordered text-custom" @*id="dataTable"*@ cellspacing="0">
                    <thead>
                        <tr>
                            <th style="width:30%">Name</th>
                            <th class="col-sm">Value</th>
                            <th style="width:30%">Create Date</th>
                            <th style="width:30%">Activate Date</th>
                        </tr>
                    </thead>

                    <tbody>
                        @foreach (var rule in rvm)
                        {
                            if (rule.Id == 3 || rule.Id == 9 || rule.Id == 12 || rule.Id == 15)
                            {
                                <tr>
                                    <td>@rule.Name</td>
                                    <td>
                                        @if (rule.Value.Count != 0)
                                        {
                                            <div class="bs-example">
                                                <div data-role="tagsinput">
                                                    @foreach (var value in rule.Value)
                                                    {@value.Value <br />}
                                                </div>
                                                @*<input type="text" data-role="tagsinput" id="input_@rule.Value.FirstOrDefault().KeyId" placeholder="Add text" value="" />*@
                                                @*<select multiple data-role="tagsinput">
                                                        @foreach (var value in rule.Value)
                                                        {
                                                            <option value="@value.Value">@value.Value</option>
                                                        }
                                                    </select>*@
                                            </div>
                                        }
                                    </td>
                                    <td>
                                        @if (rule.Value.Count != 0)
                                        {
                                            @rule.Value.FirstOrDefault().CreateDate.ToString("dd/MM/yyyy")
                                        }
                                    </td>
                                    <td>
                                        @if (rule.Value.Count != 0)
                                        {
                                            @rule.Value.FirstOrDefault().ActivateDate.ToString("dd/MM/yyyy")
                                        }
                                    </td>
                                </tr>
                            }
                            else
                            {
                                foreach (var value in rule.Value)
                                {
                                    <tr>
                                        <td>@rule.Name</td>
                                        <td>@value.Value</td>
                                        <td>@value.CreateDate.ToString("dd/MM/yyyy")</td>
                                        <td>@value.ActivateDate.ToString("dd/MM/yyyy")</td>
                                    </tr>
                                }
                            }
                        }

                    </tbody>
                </table>
            </div>
        </div>
    </div>
}
@*<script type="text/javascript" src="~/Scripts/bootstrap-tagsinput.js"></script>
    <link rel="stylesheet" href="~/Scripts/bootstrap-tagsinput.css">
    <script type="text/javascript" src="~/Scripts/bootstrap-tagsinput.min.js"></script>*@
@*<script>
        $('#input_3').tagsinput({
            itemValue: 'value',
            itemText: 'text',
            typeahead: {
                source: function (query) {
                    return $.getJSON('cities.json');
                }
            }
        });

        $('#input_3').tagsinput('add', { "value": 1, "text": "Amsterdam" });
        $('#input_3').tagsinput('add', { "value": 4, "text": "Washington" });
        $('#input_3').tagsinput('add', { "value": 7, "text": "Sydney" });
        $('#input_3').tagsinput('add', { "value": 10, "text": "Beijing" });
        $('#input_3').tagsinput('add', { "value": 13, "text": "Cairo" });
    </script>*@